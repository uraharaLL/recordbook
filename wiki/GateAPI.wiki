#summary Описание API SMS-шлюза для Системы электронных дневников
#labels Phase-Implementation,api,gate

= Введение =

СМС-гейт - обособленный сервер, способный принимать запросы и при необходимости передавать их на мобильный телефон.

СМС-гейт предназначен для трансляции оценок от СЭД на телефоны родителей. Обмен информацией происходит в json и UTF-8. Все запросы содержат ключи schoolID и schoolAccessKey, содержащие ID школы в системе гейта и ключ для доступа к гейту. В ответе всегда передаётся ключ error, содержащий код ошибки (см. ниже).

= Описание запросов =

|| *Запрос* || *URL* || *Параметры* || *Описание ответа* ||
|| Добавление пользователя. || /api/gate/addUser/ || phone - номер телефона ||  || 
|| Проверка существования пользователя || /api/gate/checkUser/ || phone - номер телефона || exists - логическая переменная (true - если пользователь существует, false - иначе) ||
|| Удаление пользователя. || /api/gate/deleteUser/ || phone - номер телефона || ||
|| Получение баланса данного пользователя. || /api/gate/getBalance/ || phone - номер телефона || sms - баланс смс; account - рублёвый остаток. ||
|| Изменение телефонного номера пользователя. || /api/gate/changePhone/ || old_phone - номер телефона; new_phone - номер телефона|| ||
|| Получение платёжной информации. || /api/gate/getPaymentInfo/ || || text - массив с html-кодом в котором описана информация, необходимая для пополнения счёта. ||
|| Отправка SMS-сообщения. || /api/gate/sendMessage/ || phone - номер телефона; text - сообщение || ||

= Коды ошибок =
|| *Значения ключа ‘error’ в ответе* || *Описание* ||
|| 0 || Ошибок нет. ||
|| 1 || Неверная пара логин:пароль школы. ||
|| 2 || Неверные параметры.||
|| 3 || Запрошенного пользователя не существует. ||
|| 4 || Не хватает SMS для отправки.||
 